
// Permissions for the tests

grant codeBase "file:${build.home}/api/target/test/classes/-"
{
    permission java.lang.RuntimePermission "modifyThread"; // for executor control
};

grant codeBase "file:${build.home}/core/target/test/classes/-"
{
    permission java.lang.RuntimePermission "modifyThread"; // for executor control
    permission org.jboss.remoting.EndpointPermission "createEndpoint";
    permission org.jboss.remoting.EndpointPermission "createRequestHandler";
    permission org.jboss.remoting.EndpointPermission "createClient";
};

grant codeBase "file:${build.home}/protocol/basic/target/test/classes/-"
{
    permission java.lang.RuntimePermission "modifyThread"; // for executor control
    permission org.jboss.remoting.EndpointPermission "createEndpoint";
    permission org.jboss.remoting.EndpointPermission "createRequestHandler";
    permission org.jboss.remoting.EndpointPermission "createClient";
};

grant codeBase "file:${build.home}/protocol/multiplex/target/test/classes/-"
{
    permission java.lang.RuntimePermission "modifyThread"; // for executor control
    permission org.jboss.remoting.EndpointPermission "createEndpoint";
    permission org.jboss.remoting.EndpointPermission "createRequestHandler";
    permission org.jboss.remoting.EndpointPermission "createClient";
    permission org.jboss.remoting.EndpointPermission "createClientSource";
    permission org.jboss.remoting.EndpointPermission "registerService";
};

// Permissions for Remoting itself

grant codeBase "file:${build.home}/api/target/main/classes/-"
{
    permission java.util.PropertyPermission "jboss.remoting.*", "read";
    permission org.jboss.remoting.EndpointPermission "*";
};

grant codeBase "file:${build.home}/core/target/main/classes/-"
{
    permission java.util.PropertyPermission "jboss.remoting.*", "read";
    permission org.jboss.remoting.EndpointPermission "*";
};

grant codeBase "file:${build.home}/protocol/basic/target/main/classes/-"
{
    permission java.util.PropertyPermission "jboss.remoting.*", "read";
};

// Support classes

grant codeBase "file:${build.home}/testing-support/target/main/classes/-"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${idea.home}/lib/idea_rt.jar"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${lib.junit.local}"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${ant.library.dir}/-"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${lib.xnio-api.local}"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${lib.xnio-nio.local}"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${lib.marshalling-api.local}"
{
    permission java.security.AllPermission;
};

grant codeBase "file:${lib.river.local}"
{
    permission java.security.AllPermission;
};
